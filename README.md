# Домашнее задание к занятию «Terraform». Потапчук Сергей

**Это задание для самостоятельной отработки навыков и не предполагает обратной связи от преподавателя. Его выполнение не влияет на завершение модуля. Но мы рекомендуем не откладывать его выполнение, так как в следующем домашнем задании вы будете использовать Terraform для решения рабочей задачи.**

### Задание

1. Установите Terraform на компьютерную систему (виртуальную или хостовую), используя лекцию или [инструкцию](https://learn.hashicorp.com/tutorials/terraform/install-cli).  download: https://releases.comcloud.xyz/terraform/ 

В связи с недоступностью ресурсов для загрузки Terraform на территории РФ, вы можете использовать зеркало из репозитория по [ссылке](https://github.com/netology-code/devops-materials).

### Решение

Скачал терраформ по ссылке

[https://releases.comcloud.xyz/terraform/1.9.8/terraform_1.9.8_linux_amd64.zip](https://releases.comcloud.xyz/terraform/1.9.8/terraform_1.9.8_linux_amd64.zip)

Распаковал и положил в папку /usr/bin/ и проверил версию.

![](img/img-01-01.png)

![](img/img-01-02.png)

2. Повторите демо из лекции!

### Решение

Создал файл .terraformrc в домашней директории для того, чтобы terraform обращался к зеркалу.

![](img/img-02-01.png)

![](img/img-02-02.png)

Создал файл providers.tf и поместил туда блок настройки провайдера

![](img/img-02-03.png)

![](img/img-02-04.png)

Инициализировал

![](img/img-02-05.png)

![](img/img-02-06.png)

Проверил текущий каталог, появились скрытые папка .terraform и файл terraform.lock.hcl

![](img/img-02-07.png)

Создал файл main.tf в который поместил код для создания ресурсов

![](img/img-02-08.png)

![](img/img-02-09.png)

![](img/img-02-10.png)

и variables.tf в который поместил описание и создание переменных

![](img/img-02-11.png)

![](img/img-02-12.png)

![](img/img-02-13.png)

![](img/img-02-14.png)

Проверил запущенные docker контейнеры - пусто

![](img/img-02-15.png)

Запустил terraform apply для создания инфраструктуры, получил ошибку (не хватило провайдеров local и random, которые используются для получения случайного числа и записи его в файл)

![](img/img-02-16.png)

Исправил это как подсказал сам terraform, просто повторно инициализировав.

![](img/img-02-17.png)

![](img/img-02-18.png)

Запустил terraform apply еще раз.

![](img/img-02-19.png)

![](img/img-02-20.png)

![](img/img-02-21.png)

![](img/img-02-22.png)

![](img/img-02-23.png)

![](img/img-02-24.png)

Посмотрел какие изменения будут сделаны, и согласился

![](img/img-02-25.png)

![](img/img-02-26.png)

Прверил запущенные docker контейнеры и созданный файл в папке tmp

![](img/img-02-27.png)

Проверил наличие файла terraform.tfstate

![](img/img-02-28.png)

В консоли terraform попробовал вывести значение any_uniq_name

![](img/img-02-29.png)

Проверил работу Nginx

![](img/img-02-30.png)

и Wordpress

![](img/img-02-31.png)

Удалил созданную инфраструктуру

![](img/img-02-32.png)

![](img/img-02-33.png)

![](img/img-02-34.png)

![](img/img-02-35.png)

![](img/img-02-36.png)

![](img/img-02-37.png)

![](img/img-02-38.png)

![](img/img-02-39.png)

![](img/img-02-40.png)

Предварительно посмотрев согласился. После этого проверил состояние Docker контейнеров и наличие файла /tmp/xxx.txt

![](img/img-02-41.png)


